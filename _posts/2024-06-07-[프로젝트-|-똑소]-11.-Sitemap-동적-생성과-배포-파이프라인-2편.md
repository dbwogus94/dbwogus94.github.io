---
layout: post
date: 2024-06-07
title: "[í”„ë¡œì íŠ¸ | ë˜‘ì†Œ] 11. Sitemap ë™ì  ìƒì„±ê³¼ ë°°í¬ íŒŒì´í”„ë¼ì¸ 2í¸"
tags: [AWS, RDS, sitemap, ddokso, ]
categories: [í”„ë¡œì íŠ¸, ë˜‘ì†Œ, ]
---


> ğŸ“Œ í¬ìŠ¤íŒ… 1í¸ê³¼ 2í¸ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆìœ¼ë©°, í•´ë‹¹ í¬ìŠ¤íŒ…ì€ 2í¸ì…ë‹ˆë‹¤.  
>   
> ìš”êµ¬ì‚¬í•­ ë‹¤ì‹œ í™•ì¸  
> - ë§¤ì¼ ë§¤ì¼ ì¦ê°€í•˜ëŠ” ìƒí’ˆì„ íŠ¹ì • ì¡°ê±´ì— ë§ê²Œ Sitemapìœ¼ë¡œ ìƒì„±í•˜ê³  ë°°í¬í•œë‹¤.  
>   
> - ìƒí’ˆ ì •ë³´ê°€ ì´ë¯¸ 50ë§Œê°œë¥¼ ë„˜ëŠ” ìƒí™©ì´ê¸° ë•Œë¬¸ì— ìš°ì„ ìˆœìœ„ë¥¼ ì •í•´ì„œ ë…¸ì¶œí•œë‹¤.  
>   
>   
>   
> sitemap ë™ì  ìƒì„± ë°°í¬ë¥¼ ìœ„í•œ ê¸°ëŠ¥ ì •ì˜  
>   
> 1. Sitemapì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” script ì •ì˜  
>   
> 2. ì¼ì • ì£¼ê¸° ë˜ëŠ” ì›í•˜ëŠ” ì‹œì ì— scriptë¥¼ ì‹¤í–‰í•  ì‹¤í–‰ í™˜ê²½  
>   
> 3. **ìƒì„±ëœ sitemapì„ í˜¸ìŠ¤íŒ…**

	- ë§¤ì¼ ë§¤ì¼ ì¦ê°€í•˜ëŠ” ìƒí’ˆì„ íŠ¹ì • ì¡°ê±´ì— ë§ê²Œ Sitemapìœ¼ë¡œ ìƒì„±í•˜ê³  ë°°í¬í•œë‹¤.
	- ìƒí’ˆ ì •ë³´ê°€ ì´ë¯¸ 50ë§Œê°œë¥¼ ë„˜ëŠ” ìƒí™©ì´ê¸° ë•Œë¬¸ì— ìš°ì„ ìˆœìœ„ë¥¼ ì •í•´ì„œ ë…¸ì¶œí•œë‹¤.

	sitemap ë™ì  ìƒì„± ë°°í¬ë¥¼ ìœ„í•œ ê¸°ëŠ¥ ì •ì˜

	1. Sitemapì„ ë™ì ìœ¼ë¡œ ìƒì„±í•˜ëŠ” script ì •ì˜
	2. ì¼ì • ì£¼ê¸° ë˜ëŠ” ì›í•˜ëŠ” ì‹œì ì— scriptë¥¼ ì‹¤í–‰í•  ì‹¤í–‰ í™˜ê²½
	3. **ìƒì„±ëœ sitemapì„ í˜¸ìŠ¤íŒ…**

		â‡’ ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” 3ë²ˆê³¼ ê²°ê³¼ë¥¼ ì¤‘ì ìœ¼ë¡œ ë‹¤ë£¹ë‹ˆë‹¤.



### 3. ìƒì„±ëœ Sitemapì„ í˜¸ìŠ¤íŒ…



#### 3.1. Sitemap ìƒì„± ë°°í¬ ê³¼ì •

1. github action ìŠ¤ì¼€ì¤„ëŸ¬ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ ë§¤ì¼ íŠ¹ì • ì‹œê°„ì— Sitemap ìƒì„±
2. ìƒì„±ëœ Sitemapë¥¼ AWS S3ì— ë°°í¬
3. S3ì— ë°°í¬ì™€ í•¨ê»˜ Cloudfront ìºì‹œ ë¬´íš¨í™” ìˆ˜í–‰


#### 3.2. Sitemap í˜¸ìŠ¤íŒ… ê³¼ì •


![0](/assets/img/2024-06-07-í”„ë¡œì íŠ¸--ë˜‘ì†Œ-11.-Sitemap-ë™ì -ìƒì„±ê³¼-ë°°í¬-íŒŒì´í”„ë¼ì¸-2í¸.md/0.png)

1. ë°°í¬ëœ Sitemap **AWS Amplifyì—ì„œ í˜¸ìŠ¤íŒ…**
2. Google Search Consoleì— Sitemap ìƒ‰ì¸ ë“±ë¡
	1. https://www.ddokso.com/sitemap-index.xml.gz í•´ë‹¹ ê²½ë¡œë¡œ ìƒ‰ì¸ ìš”ì²­
3. Google Searchì—ì„œ ìƒ‰ì¸ëœ íŒŒì¼ ìš”ì²­
4. Route53ì—ì„œ www.ddokso.com A ë ˆì½”ë“œì— ì—°ê²°ëœ `Amplify`ë¡œ íŠ¸ë˜í”½ ì „ë‹¬
5. Amplifyì˜ Cloudfrontì˜ Rewrite ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ **Sitemap Cloudfrontë¡œ íŠ¸ë˜í”½ ì „ë‹¬**
6. Sitemap Cloudfrontì—ì„œ Sitemapì„ ì œê³µ
	1. ìºì‹±ë˜ì–´ ìˆë‹¤ë©´ S3 ì ‘ê·¼ ì—†ì´ ìºì‹±ëœ Sitemap ì œê³µ
	2. ìºì‹±ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ S3ì—ì„œ Sitemapì„ ë°›ì•„ì„œ ì‘ë‹µ

> ğŸ’¡ ì™œ Amplifyì˜ Cloudfrontì—ì„œ S3ì— ì—°ê²°í•˜ì§€ ì•Šê³ , **Sitemap Cloudfront í†µí•´ ì „ë‹¬í•˜ê²Œ í–ˆë‚˜?**


![1](/assets/img/2024-06-07-í”„ë¡œì íŠ¸--ë˜‘ì†Œ-11.-Sitemap-ë™ì -ìƒì„±ê³¼-ë°°í¬-íŒŒì´í”„ë¼ì¸-2í¸.md/1.png)


**ë¨¼ì € Cloudfrontë¥¼ ì“°ëŠ” ì´ìœ ë¥¼ ì•Œì•„ì•¼ í•œë‹¤.**

1. ìºì‹±ìœ¼ë¡œ ë¹„ìš© ì ˆê°
	- S3ëŠ” ì—…ë¡œë“œì™€ ì €ì¥ë¹„ìš©ì„ ë°›ì§€ ì•ŠëŠ” ëŒ€ì‹  ë‹¤ìš´ë¡œë“œë‹¹ ë¹„ìš©ì´ ë°œìƒí•œë‹¤.
	- ê·¸ë˜ì„œ S3 ì•ë‹¨ì— Cloudfrontë¥¼ ë‘ì–´ì„œ
2. ìºì‹œ ë¬´íš¨í™”(ìºì‹œ ë²„ìŠ¤í„°)
	- CloudfrontëŠ” ìºì‹œë¥¼ ìˆ˜ë™ìœ¼ë¡œ ë¬´íš¨í™” í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.
3. CDN ì—­í•  ìˆ˜í–‰(í•´ë‹¹ì‚¬í•­ ì—†ìŒ)

ë¬¸ì œëŠ” **Amplifyì˜ CloudfrontëŠ” ì§ì ‘ì ì¸ ìºì‹œ ë¬´íš¨í™” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤.**

- ê³µì‹ë¬¸ì„œì— ë”°ë¥´ë©´ AmplifyëŠ” ë°°í¬ì‹œ ìë™ìœ¼ë¡œ ìºì‹œ ë¬´íš¨í™”ë¥¼ í•œë‹¤.
- ë•Œë¬¸ì— Amplify Consoleì—ì„œëŠ” ìºì‹œ ë¬´íš¨í™” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.

ì¦‰ , **Amplify Cloudfrontì—ì„œ ìˆ˜ë™ ìºì‹œ ë¬´íš¨í™” ê¸°ëŠ¥ì„ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìˆ˜ë™ìœ¼ë¡œ ìºì‹œ ë¬´íš¨í™” ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì¼ë°˜ Cloudfrontë¥¼ í•˜ë‚˜ ë” ìƒì„±í•˜ì—¬ Sitemapì„ í˜¸ìŠ¤íŒ… í•˜ê¸°ë¡œ í–ˆë‹¤.**


> ğŸ’¡ ë¬¸ì œê°€ ì™„ì „íˆ í•´ê²°ëœ ê±´ê°€? 


**ì•„ë‹ˆë‹¤ Cloudfront ì¤‘ë³µ ì‚¬ìš©ì€ ì¶”ê°€ì ì¸ ë¹„ìš©ì´ ë°œìƒí•œë‹¤.**
ë¬¸ì œë¥¼ ì™„ë²½í•˜ê²Œ í•´ê²°í•˜ë ¤ë©´ Amplify Cloudfrontì˜ IDë¥¼ ì•Œì•„ì•¼ í•œë‹¤. 


ê·¸ë ‡ê²Œ ëœë‹¤ë©´ AWS CLIë¥¼ ì‚¬ìš©í•˜ì—¬ Amplify Cloudfrontì— ìˆ˜ë™ìœ¼ë¡œ ìºì‹œ ë¬´íš¨í™”ë¥¼ ìƒì„±í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.



### 4. ìµœì¢… ê²°ê³¼ í™•ì¸



#### 4.1. Github Actionì—ì„œ Sitemap ë°°í¬ ì›Œí¬í”Œë¡œ ë¡œê·¸


![2](/assets/img/2024-06-07-í”„ë¡œì íŠ¸--ë˜‘ì†Œ-11.-Sitemap-ë™ì -ìƒì„±ê³¼-ë°°í¬-íŒŒì´í”„ë¼ì¸-2í¸.md/2.png)



#### 4.2. ë°°í¬ëœ Sitemap ì‘ë‹µ í™•ì¸



{% raw %}
```bash
$ curl https://www.ddokso.com/sitemap-index.xml.gz | gunzip -c

% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   255  100   255    0     0    279      0 --:--:-- --:--:-- --:--:--   279
<?xml version="1.0" encoding="UTF-8"?><urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1"><url><loc>https://www.ddokso.com/sitemap-appliance-digital-1.xml.gz</loc></url><url><loc>https://www.ddokso.com/sitemap-base-sitemap.xml.gz</loc><lastmod>2024-06-30T00:00:00.000Z</lastmod></url></urlset>%
```
{% endraw %}




#### 4.3. Google Search Consoleì—ì„œ ê²°ê³¼ í™•ì¸ 


![3](/assets/img/2024-06-07-í”„ë¡œì íŠ¸--ë˜‘ì†Œ-11.-Sitemap-ë™ì -ìƒì„±ê³¼-ë°°í¬-íŒŒì´í”„ë¼ì¸-2í¸.md/3.png)



### ì°¸ê³ 

- [google search console ê³µì‹ ë¬¸ì„œ > ì‚¬ì´íŠ¸ë§µ ì œì‘ ë° ì œì¶œí•˜ê¸°](https://developers.google.com/search/docs/crawling-indexing/sitemaps/build-sitemap?hl=ko)
- [Sitemapì—ì„œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì€?](https://m.blog.naver.com/suin2_91/221342308411)
- [sitemap í”„ë¡œí† ì½œ](https://www.sitemaps.org/protocol.html#changefreqdef)
- [ë‹¤ë‚˜ì™€ ì‚¬ì´íŠ¸ë§µ ì˜ˆì‹œ](https://prod.danawa.com/sitemap.xml)
