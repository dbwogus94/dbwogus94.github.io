---
layout: post
date: 2025-03-16
title: "[테스트코드] 테스트는 왜 필요할까? (with TDD)"
tags: [Test Code, ]
categories: [지식한입, 테스트, ]
mermaid: true
---


> 💡 TDD를 이해하기 위해 정리해본 글입니다.



### 1. 테스트 란..🤔


테스트 코드를 본격적으로 알아 보기 앞서 테스트란 단어의 정의를 먼저 확인해보겠습니다.


**사전 정의에서 테스트란?**


> **`시험', `검사'의 뜻.**  
> - Oxford Languages 사전


> **지식, 기술, 능력 따위를 평가하고 검사하는 일**  
> - 위키백과


**개발의 테스트란?**


> 프로그래밍의 테스트는 **프로그램이 의도된 대로 동작하는지 검증하는 과정  
> -** **Search Labs | AI 개요**


개발에서 말하는 테스트는 아주 넓은 의미로 그리고 보편적으로 사용되는 단어라고 이해했습니다.


**그리고 해당 포스팅에서는 가장 작은 단위인 코드 레벨의 “테스트코드”에 집중해서 설명하려 합니다.**



### 2. 테스트코드와 그리고 TDD


![0](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/0.png)_출처: https://devinn.dev/blog/detail/199_


테스트코드는 의미 그대로 테스트 수행을 위한 코드를 말합니다. 그리고 테스트코드에 대한 글을 찾다보면 필연적으로 TDD라는 키워드가 등장합니다.



#### **2.1.** 테스트코드의 **본질은 뭘까?** 

1. 테스트를 통해 소프트웨어의 **품질**을 보장한다.
2. 유지보수에 **안정성**을 부여한다.
3. **좋은 코드 구조를 만들도록 유도한다.**

이 중에서 특히 "좋은 코드 구조를 만들도록 유도한다"는 다소 직관적이지 않게 느껴질 수 있습니다. 이 점을 이해하기 위해 TDD(Test Driven Development)를 조사해보기로 했습니다.



#### **2.2. TDD(Test Driven Development)란 무엇일까?**


TDD는 소프트웨어 개발 방법론으로, 거장 **켄트 벡(Kent Beck)**에 의해 제안되었습니다.


TDD의 핵심을 간단히 정리하면 다음과 같습니다.

- GPT에게 켄트의 TDD에 대한 질문을 해보았습니다.

![1](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/1.png)


> _**"테스트를 수단으로 Clean Code를 유도해 소프트웨어의 품질을 향상시킨다."**_


즉, TDD는 단순히 테스트를 먼저 작성하는 것에서 그치는 것이 아니라, 테스트를 통해 코드의 설계를 개선하고 좋은 구조로 발전시키는 것을 목표로 합니다.


하지만 이론적으로는 이해가 쉬워도 실제로 적용하는 것은 어렵습니다. 왜냐하면 TDD는 단순히 "테스트가 먼저다"라는 규칙을 지키는 것이 아니라, **무엇을 어떻게 테스트해야 좋은 코드 구조를 얻을 수 있는지**에 대한 고민이 필요하기 때문입니다.



#### 2.3. TDD의 오해


많은 개발자들이 TDD를 **"테스트 우선주의"**로만 이해하거나, **"테스트가 잘 되는 코드는 좋은 코드"**라고 오해합니다. 하지만 중요한 것은 **좋은 설계가 테스트하기 쉬운 코드를 만든다**는 점입니다. 즉, TDD는 단지 테스트를 먼저 작성하는 것이 아니라, 좋은 설계를 이끌어내기 위한 방법론입니다.


> _나는 TDD(Test-Driven Development)가 디자인 도구라 생각하지 않는다. 테스트가 디자인을 이끄는 것이 아니라 좋은 디자인이 테스트하기 쉬운 코드를 만든다고 생각한다._  
> - [정진욱님 - Testing, Oh my!](https://jwchung.github.io/testing-oh-my)



#### **2.4. 그렇다면 어떤 게 좋은 테스트일까?**


이제 자연스럽게 다음 질문으로 넘어갈 수 있습니다.


> "좋은 설계란 무엇인가? 그리고 이를 위해 우리는 무엇을 테스트해야 하는가?"


TDD를 제대로 이해하고 적용하려면, 우리가 작성하는 테스트가 과연 적절한지 판단할 수 있어야 합니다. 따라서 다음 장에서는 **무엇을 테스트해야 하는지** 구체적으로 알아보겠습니다.



### 3. 무엇을 테스트 해야 할까?


> 💡 해당 파트는 가장 이해하기 좋은 자료 였던 “스프링캠프 2019 [Track 2 Session 3] : 무엇을 테스트할 것인가? 어떻게 테스트할 것인가? (권용근)” 님의 발표중 앞부분을 정리했습니다.


TDD를 제대로 이해하고 실천하려면, 무엇을 테스트해야 하는지 명확히 알아야 합니다. 좋은 설계를 유도하기 위해서는 "**구현이 아닌 설계를 테스트해야 한다**"는 원칙이 중요합니다.



#### 3.1. “설계를 테스트” 하는 방법(with 로또 구현)


예시로 로또 번호 생성기를 통해 살펴보겠습니다.


![2](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/2.png)


**요구사항** 

1. 6개의 숫자를 반환한다.
2. 중복되지 않는 숫자 반환한다.
3. 랜덤하게 반환한다.

여기서 중요한 질문이 생깁니다.


> _**“구현을 테스트한다는 것과 설계를 테스트한다는 것은 어떻게 다를까?"**_


**구현을 테스트한 다는 것은?**


**예시) 구현된 소스 코드**


![3](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/3.png)

1. 빈 `HashSet`을 만든다.
2. `List` 에 전체 숫자들을 생성하고
3. `List`의 숫자를 섞는다.
4. `HashSet`에 6개의 숫자가 채워질 때까지 뽑는다.

**예시) 테스트 코드**


![4](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/4.png)

1. `LottoNumbersGenerator`를 인스턴스화 한다.
2. 생성된 인스턴스의 `generateTicket()` 메서드를 통해 랜덤한 숫자들을 생성한다.
3. 생성된 숫자들이 6개가 맞는지 테스트한다.

**위 테스트 코드는 적절한 테스트일까?**


![5](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/5.png)


> 🤔 Q) 중복에 대해서도 테스트 되어야 하지 않을까요?


> 🗣️ A) Set을 사용했기 때문에 중복이 나올 수 없기 때문에 테스트 케이스를 만들지 않았어요.


**이것이 구현을 테스트 한 것이다.** Set을 사용했다는 것은 **구현했을 당시에만 알 수 있는 로직**이다. 


만약에 이후 이후 요구사항 변경의 이유로 동료 개발자에 의해 로직에서 **Set이 제거**된다면?


동료 개발자는 **이전 테스트 케이스를 신뢰**하고 신규 요구사항에 대한 테스트 코드만 만들고 테스트를 수행한다. 


그리고 배포를 수행한다면 어떨까..? **최악의 경우 중복에 의해 시스템 자체에 신뢰를 잃을 수 있다.**

- 구현에 의존한 테스트 - Set으로 구현했기 때문에 중복에 대한 테스트를 따로 하지 않는다.

![6](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/6.png)

- 설계에 의존한 테스트 - 6개의 숫자가 중복 되는지 테스트를 수행한다.

![7](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/7.png)



#### 3.2. 정리


**❌ 구현을 테스트한다는 것은?**


구현된 소스 코드에서 Set 자료구조를 사용하여 중복되지 않는 숫자를 보장했다고 가정하고, 중복 여부에 대한 별도의 테스트를 작성하지 않습니다. 즉, 구현에 의존한 채로 테스트 코드를 작성하는 것입니다.


그러나 이는 위험한 접근입니다. 만약 나중에 누군가 Set 대신 다른 자료구조로 변경하면, 기존의 중복 방지 로직이 깨져도 이를 잡아내지 못할 수 있습니다.


**✅ 설계를 테스트한다는 것은?**


설계를 기반으로 한 올바른 접근법은 "**요구사항 자체를 충실히 검증하는 것**"입니다. 즉, 요구사항인 "숫자가 중복되지 않는다"라는 조건 자체를 명시적으로 검증하는 것입니다.

- 구현에 의존한 잘못된 예시: Set 사용했으니 중복 여부 체크 생략
- 설계에 의존한 올바른 예시: 결과값에서 중복 여부 직접 체크

설계를 기반으로 한 테스트는 코드 변경 시에도 안전망 역할을 하며, 소프트웨어의 품질과 안정성을 지속적으로 유지할 수 있도록 도와줍니다.



## 4. “테스트 가능한 것” vs “불가능한 것"


그렇다면 모든 것을 다 테스트할 수 있을까요? 그렇지 않습니다. 외부 서버 API 호출이나 랜덤 값 생성처럼 제어할 수 없는 영역이 존재합니다.


![8](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/8.png)



### **4.1. 랜덤한 값을 테스트 가능하게 하는 방법(with 로또 구현)**


예컨대 로또 번호 생성 요구사항에서 "**랜덤하게 반환한다**"라는 조건은 제어 불가능한 영역입니다. 이런 경우 전략 패턴 등을 활용해 랜덤 요소를 외부에서 주입받아 제어 가능한 형태로 만들 수 있습니다.


![9](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/9.png)


**테스트 가능하게 개선된 코드**


![10](/assets/img/2025-03-16-테스트코드-테스트는-왜-필요할까-with-TDD.md/10.png)


하지만 여기서 고민이 생깁니다


> _**"테스트 통과만을 위해 랜덤 요소까지 전략 패턴으로 제어 가능하게 만드는 것이 정말 요구사항의 본질에 부합하는 걸까?"**_


결국 **무엇을 어떻게 테스트해야 좋은 설계를 얻고, 좋은 품질의 소프트웨어를 만들 수 있는지 고민하는 과정 자체가 TDD의 핵심**이라고 할 수 있습니다.



### 4.2. 정리


정리하자면,

- **TDD란 단순히 '테스트 먼저'가 아니라 좋은 설계를 유도하기 위한 방법론이다**
- 따라서 "**무엇을 어떻게 테스트할 것인지**"에 대한 고민이 필수적이다.
- 이를 위해 "**구현이 아닌 설계 중심으로 테스트**"해야 하며, 제어 불가능한 요소는 외부 주입 등의 방식을 통해 제어 가능한 형태로 만들어야 한다.

위와 같은 흐름으로 연결 지점을 명확히 하면 글 전체가 자연스럽게 이어지고 독자에게 명확한 메시지를 전달할 수 있습니다.



### 5. 총총..


테스트 코드에 대해 많이 들은 말이 있습니다. 테스트 코드로 얻을 수 있는 것은 개발자의 **“심리적 안정감”** 그리고 **“자신감”**이라고 말이죠.


테스트 코드에 대해 들은 말중 가장 와닿은 말도 있습니다.

- **테스트 코드는 개발자가 안전하게 퇴근 할 수 있는 안전감이다.**
- **테스트 코드는 개발자의 직업적 윤리이다.**
- **더 나아가 테스트 코드는 “현재의 나”에게 뿐만 아니라 “미래의 나” 그리고 동료들을 위해 필요하다.**

테스트 코드를 통해 우리가 얻고자 하는 것은 단순히 높은 커버리지 수치나 형식적인 완벽함이 아닙니다. 우리가 얻고자 하는 것은 바로 개발자로서 가지는 "**심리적 안정감과 자신감**", 그리고 "**미래의 나와 동료들이 신뢰할 수 있는 명세서로서의 가치**"입니다.


꼭 거창한 이유가 아니더라도 우리의 자신감과 안정감 그리고 동료들을 위해서라도 이제부터 조금씩 더 깊게 **테스트 코드에 관심을 두고 실천해 보는 건 어떨까요?**



## 참고

- [향로(기억보단 기록을)1. 테스트하기 좋은 코드 - 테스트하기 어려운 코드](https://jojoldu.tistory.com/674)
- [SpringCamp by KSUG 스프링캠프 2019: 무엇을 테스트할 것인가? 어떻게 테스트 할 것인가?](https://www.youtube.com/watch?v=YdtknE_yPk4)
- [Jin-Wook Chung ](https://jwchung.github.io/testing-oh-my)[**Testing, Oh my!**](https://jwchung.github.io/testing-oh-my)
