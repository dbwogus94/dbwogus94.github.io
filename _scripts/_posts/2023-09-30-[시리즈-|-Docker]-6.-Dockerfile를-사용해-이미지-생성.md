---
layout: post
date: 2023-09-30
title: "[ì‹œë¦¬ì¦ˆ | Docker] 6. Dockerfileë¥¼ ì‚¬ìš©í•´ ì´ë¯¸ì§€ ìƒì„±"
tags: [Docker, ]
categories: [ì‹œë¦¬ì¦ˆ, Docker, ]
mermaid: true
---



### 1. Dockerfile ì´ë€?


ê³µì‹ë¬¸ì„œì˜ ì •ì˜([Dockerfile reference](https://docs.docker.com/engine/reference/builder/#dockerfile-reference))


> Docker can build images automatically by reading the instructions from aÂ Dockerfile. AÂ DockerfileÂ is a text document that contains all the commands a user could call on the command line to assemble an image. This page describes the commands you can use in aÂ Dockerfile.


ì‰½ê²Œ ë§í•˜ë©´ **`Dockerfile`****ì€ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ëª…ë ¹ì–´ ëª¨ìŒ**ì´ë‹¤.

- Dockerfileì€ ìì²´ì ì¸ ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì •ì˜í•œë‹¤.
	- ëª…ë ¹ì–´ëŠ” `FROM`, `ENV`, `WORKDIR`, `COPY`, `RUN`, `CMD` ... ë“±ì´ ìˆë‹¤.
	- ì°¸ê³ : [Docker docs > Dockerfile](https://docs.docker.com/engine/reference/builder/)
- ì‘ì„±ëœ ëª…ë ¹ì€ ì ˆì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.
- ì •ì˜ëœ Dockerfileì€ `docker build ...` ëª…ë ¹ì„ í†µí•´ ì´ë¯¸ì§€ë¡œ ìƒì„±ëœë‹¤.


#### 1.1. `Dockerfile`ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ ë¹Œë“œí•˜ëŠ” ë°©ë²•


ì°¸ê³ : [Docker docs > commandline > build#options](https://docs.docker.com/engine/reference/commandline/build/#options)



{% raw %}
```shell
docker build [OPTIONS] PATH > URL > -
```
{% endraw %}


- ex) í˜„ì¬ ê²½ë¡œì— ë„ì»¤ íŒŒì¼ì´ `Dockerfile.user` ëª…ìœ¼ë¡œ ìˆëŠ” ê²½ìš°


{% raw %}
```shell
## -t: ì´ë¯¸ì§€ ì´ë¦„ ì •ì˜, -f: ì‚¬ìš©í•  Dockerfile ì´ë¦„ ëª…ì‹œ
docker build -t test_images -f Dockerfile.user .
```
{% endraw %}


- ex) í˜„ì¬ ê²½ë¡œì— ë„ì»¤ íŒŒì¼ì´ `Dockerfile` ëª…ìœ¼ë¡œ ìˆëŠ” ê²½ìš°


{% raw %}
```shell
## ë„ì»¤íŒŒì¼ëª…ì´ "Dockerfile"ì¸ ê²½ìš° -fëŠ” ìƒëµ í•  ìˆ˜ ìˆë‹¤.
docker build -t test_images .
```
{% endraw %}


- ex) ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ë¶€ì—¬í•˜ì—¬ ìƒì„±


{% raw %}
```shell
# -t <name:tag>
## tagê°€ ìƒëµë˜ëŠ” ê²½ìš° 'latest'ë¡œ ìë™ ë¶€ì—¬ëœë‹¤.
docker build -t test_images:tag-v2 .
```
{% endraw %}




### 2. `FROM` ëª…ë ¹ì–´



{% raw %}
```docker
FROM [--platform=<platform>] <image> [AS <name>]

FROM [--platform=<platform>] <image>[:<tag>] [AS <name>]

FROM [--platform=<platform>] <image>[@<digest>] [AS <name>]
```
{% endraw %}


- `FROM`ì€ **ì‹ ê·œë¡œ ìƒì„±ë  ì´ë¯¸ì§€ì˜ Base ì´ë¯¸ì§€ë¥¼ ì§€ì •í•˜ëŠ” ì—­í• **ì„ í•œë‹¤.
	- ë„ì»¤ì˜ ì´ë¯¸ì§€ëŠ” ë ˆì´ì–´ í˜•ì‹ì˜ êµ¬ì¡°ë¥¼ ì‚¬ìš©í•œë‹¤.
	- OS ì»¤ë„ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê²½ìš°ë¥¼ ì œì™¸í•˜ê³ , ì‚¬ìš©ìê°€ ìƒì„±í•˜ëŠ” ëª¨ë“  ì´ë¯¸ì§€ì—ëŠ” FROMì´ ì •ì˜ëœë‹¤.
	- ì°¸ê³ : [3. Docker ì‚¬ìš©ì„ ìœ„í•œ í™˜ê²½ ì´í•´í•˜ê¸° > ë„ì»¤ ë¼ì´ë¸Œì‚¬ì´í´](https://jaynote2022.tistory.com/50#3.%20%EB%8F%84%EC%BB%A4%20%EB%9D%BC%EC%9D%B4%EB%B8%8C%EC%82%AC%EC%9D%B4%ED%81%B4)
- `ARG` ëª…ë ¹ì„ ì œì™¸í•˜ê³  FROMì€ í•­ìƒ ë§¨ ìœ„ì— ë‚˜ì™€ì•¼ í•œë‹¤.
- `-platform` ì˜µì…˜ì€ ì´ë¯¸ì§€ì˜ í”Œë ›í¼ì„ ì§€ì •í•  ë•Œ ì‚¬ìš©ëœë‹¤.
	- `linux/amd64`: ì¸í…” ì•„í‚¤í…ì²˜ì¸ x86 ê¸°ë°˜ì˜ ë¦¬ëˆ…ìŠ¤ í”Œë ›í¼ ì§€ì •
	- `linux/arm64`: arm ì•„í‚¤í…ì²˜ ê¸°ë°˜ì˜ ë¦¬ëˆ…ìŠ¤ í”Œë ›í¼ ì§€ì •
	- `windows/amd64`: ì¸í…” ì•„í‚¤í…ì²˜ì¸ x86 ê¸°ë°˜ì˜ ìœˆë„ìš° í”Œë ›í¼ ì§€ì •
- `[AS <name>]` FROMì€ ì—¬ëŸ¬ê°œ ì •ì˜ê°€ ê°€ëŠ¥í•˜ë©°, ì´ ê²½ìš° êµ¬ë¶„í•˜ê¸° ìœ„í•´ ê°€ëª…ì„ ì§€ì›í•œë‹¤.
	- FROMì€ ë‹¤ìŒ FROMì´ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ í•˜ë‚˜ì˜ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ê°€ì§€ëŠ” ì½”ë“œ ë¸”ë¡ìœ¼ë¡œ ì´í•´í•´ë„ ê´œì°®ë‹¤.
	- ì¡°ê¸ˆ ë” ë¹„ìŠ·í•œ ë¹„ìœ ëŠ” Github Actionì˜ JOB í•˜ë‚˜ê°€ FROM í•˜ë‚˜ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.


### 3. `RUN` ëª…ë ¹ì–´



{% raw %}
```docker
# ì‚¬ìš©ë²• 1. shell ëª…ë ¹ ë°©ì‹ìœ¼ë¡œ ì „ë‹¬
RUN command param1 param2

# ì‚¬ìš©ë²• 2. exec ì‹¤í–‰ í˜•ì‹ *í°ë”°ì˜´í‘œ(")ë§Œ ì‚¬ìš©ê°€ëŠ¥
RUN ["executable", "param1", "param2"]
```
{% endraw %}


- `RUN` ëª…ë ¹ì€ **ì´ë¯¸ì§€ ë¹Œë“œì— í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ëª…ë ¹ì„ ìˆ˜í–‰**í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
- `RUN` ëª…ë ¹ì€ shellì—ì„œ ëª…ë ¹ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
	- ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì€ ê²°êµ­ `FROM`ì— ì •ì˜ëœ Base ì´ë¯¸ì§€ì— ìˆëŠ” íŒ¨í‚¤ì§€ë§Œ ê°€ëŠ¥í•˜ë‹¤.
- `RUN` ëª…ë ¹ì€ ë¹Œë“œ ë¡œê·¸ì— ì§„í–‰ ìƒí™©ìœ¼ë¡œ í‘œì‹œëœë‹¤.
	- Github Actionì—ì„œ stepê³¼ ë¹„ìŠ·í•˜ê²Œ ë¡œê·¸ì— ì§„í–‰ ìƒí™©ì´ í‘œì‹œëœë‹¤.
- `RUN` ëª…ë ¹ì´ ì‹¤í–‰ë˜ë©´ ê²°ê³¼ëŠ” ì»¤ë°‹ì´ ëœë‹¤.
	- ì»¤ë°‹ëœ ê²°ê³¼ëŠ” ë‹¤ìŒ `FROM`ì—ì„œ ì ‘ê·¼í•˜ì—¬ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- 'ì‚¬ìš©ë²• 2' ê²½ìš° `$í™˜ê²½ë³€ìˆ˜`ì— ì ‘ê·¼ í•˜ëŠ” ë°©ì‹ì˜ ëª…ë ¹ì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì•½ê°„ì˜ ì°¨ì´ê°€ ë°œìƒí•œë‹¤.
	- `RUN echo $HOME` ê°€ëŠ¥
	- `RUN [ "echo", "$HOME" ]` ë¶ˆê°€ëŠ¥
	- `RUN [ "sh", "-c", "echo $HOME" ]` ê°€ëŠ¥
	- ë˜í•œ _**exec ì‹¤í–‰ ë°©ì‹ì€ json ë°°ì—´ì´ë‹¤. ë•Œë¬¸ì— ì‘ì€ë”°ì˜´í‘œ(')ëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.**_


#### ì˜ˆì‹œ1 - `RUN` ë‹¨ìˆœ ì‚¬ìš©



{% raw %}
```docker
# Dockerfile

# ubuntu í˜¸ìŠ¤íŠ¸ì— ì´ë¯¸ì§€ê°€ ì—†ë‹¤ë©´ ìë™ ì„¤ì¹˜
FROM ubuntu

# case 1) ë‹¨ìˆœ ì‚¬ìš©
RUN echo $HOME
# case 2) ì—¬ëŸ¬ì¤„ë¡œ ì‚¬ìš©
RUN /bin/bash -c 'source $HOME/.bashrc && \\
echo $HOME'
# case 3) exec ì‹¤í–‰í˜•ì‹ ì‚¬ìš©
RUN [ "sh", "-c", "echo $HOME" ]
```
{% endraw %}


- `docker build -t test_run .` ë¡œê·¸ í™•ì¸

	![0](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/0.png)

	1. [ 1 / 3 ] : FROM ubuntu ëª…ë ¹ìœ¼ë¡œ ì¸í•´ docker ë ˆì§€ìŠ¤íŠ¸ë¦¬ì—ì„œ `ubuntu:latest` ë¥¼ ë‚´ë ¤ ë°›ëŠ”ë‹¤.
	2. [ 2 / 4 ], [ 3 / 4 ], [ 4 / 4 ] : RUN ëª…ë ¹ì˜ ê²½ìš° ë¹Œë“œ ë¡œë“œì— ì§„í–‰ ìƒí™©ì´ í‘œì‹œë˜ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.


#### ì˜ˆì‹œ2 - ì´ì „ `FROM` ì˜ `RUN`ì—ì„œ ìˆ˜í–‰ëœ ê²°ê³¼ë¥¼ ë‹¤ìŒ `FROM`ì—ì„œ ì‚¬ìš©í•˜ê¸°



{% raw %}
```docker
# Dockerfile.RUN

FROM ubuntu as job1

RUN echo 'echo "echo 1"' > echo.sh
RUN echo 'echo "echo 2"' >> echo.sh

FROM ubuntu as job2

RUN mkdir ./app
# `--from` ì˜µì…˜ìœ¼ë¡œ job1ì—ì„œ ìƒì„±í•œ echo.shë¥¼ ê°€ì ¸ì™€ ë³µì‚¬í•œë‹¤.
COPY --from=job1 /echo.sh ./app/echo.sh
RUN sh ./app/echo.sh
```
{% endraw %}


- `docker build -t test_run:tag2 -f Dockerfile.RUN .` ë¡œê·¸ í™•ì¸

	![1](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/1.png)

	1. [ job 1 / 3 ] : job1 ê³¼ job2ëŠ” ë™ì¼í•œ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤.
		- ë•Œë¬¸ì— [ job2 1 / 3 ] ë¡œê·¸ëŠ” ì¶œë ¥ë˜ì§€ ì•ŠëŠ”ë‹¤.
		- `CACHED`ê°€ ë¶™ëŠ” ì´ìœ ëŠ” 'ì˜ˆì‹œ1)'ì—ì„œ ì„¤ì¹˜ëœ ë ˆì´ì–´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì´ë‹¤. (ì•„ë˜ ì‚¬ì§„ìœ¼ë¡œ ì¶”ê°€ ì„¤ëª…)
	2. [ job1 2 / 3] ~ [ job2 4 / 4 ] ë¡œê·¸ë¥¼ ë³´ê²Œë˜ë©´ `job1`ê³¼ `job2`ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.
		- í•˜ì§€ë§Œ `COPY --from=job1` ì²˜ëŸ¼ `job1`ì„ ì˜ì¡´í•˜ëŠ” ê²½ìš°ë¼ë©´ `job1` ì¢…ë£Œí›„ ìˆœì°¨ì ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.
- ìƒˆë¡œìš´ ê°€ìƒí™˜ê²½ì—ì„œ 'ì˜ˆì‹œ2'ë¥¼ ë‹¤ì‹œ ë¹Œë“œí•œ ë¡œê·¸ í™•ì¸

	![2](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/2.png)

	1. ìƒˆë¡œìš´ ê°€ìƒí™˜ê²½
	2. [job1 1/3]ì—ì„œ `CACHED`ê°€ ë¶™ì§€ ì•Šê³  ì‹ ê·œë¡œ ì„¤ì¹˜ëœë‹¤.


### 4. `CMD` ëª…ë ¹ì–´



{% raw %}
```docker
# ì‚¬ìš©ë²• 1. shell ëª…ë ¹ ë°©ì‹ìœ¼ë¡œ ì „ë‹¬
CMD command param1 param2

# ì‚¬ìš©ë²• 2. exec ì‹¤í–‰ í˜•ì‹ *í°ë”°ì˜´í‘œ(")ë§Œ ì‚¬ìš©ê°€ëŠ¥
CMD ["executable","param1","param2"]

# ì‚¬ìš©ë²• 3. ENTRYPOINT ì™€ ê°™ì´ ì‚¬ìš©ì‹œ
CMD ["param1","param2"]
```
{% endraw %}


- `CMD` ëª…ë ¹ì˜ ì£¼ëœ ëª©ì ì€ **ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì‹¤í–‰ë  ë•Œ "ê¸°ë³¸ê°’(ëª…ë ¹)"ì„ ì „ë‹¬(ì‹¤í–‰)í•˜ëŠ” ëª©ì **ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.
- ì—¬ê¸°ì„œ "ê¸°ë³¸ê°’"ì´ë€ 2ê°€ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.
	1. ì‹¤í–‰íŒŒì¼(ëª…ë ¹ì–´)ì„ ì „ë‹¬í•œë‹¤.
	2. ì¸ìë¥¼ ì „ë‹¬í•œë‹¤. ì „ë‹¬ëœ ì¸ìëŠ” `ENTRYPOINT`ëª…ë ¹ì—ì„œ ì‚¬ìš©í•˜ê²Œ ëœë‹¤.
- `CMD` ëª…ë ¹ì€ `Dockerfile`ì—ì„œ 1ê°œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
	- ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°€ì¥ ë§ˆì§€ë§‰ í•­ëª©ë§Œ ì ìš©ëœë‹¤.


#### ì˜ˆì‹œ1 - `CMD` ë‹¨ìˆœ ì‚¬ìš©



{% raw %}
```docker
FROM ubuntu as job1

RUN echo 'echo "echo 1"' > echo.sh
RUN echo 'echo "echo 2"' >> echo.sh

FROM ubuntu as job2

RUN mkdir ./app
# job1ì—ì„œ ìƒì„±í•œ echo.shë¥¼ ê°€ì ¸ì™€ ë³µì‚¬í•œë‹¤.
COPY --from=job1 /echo.sh ./app/echo.sh
# ì‹¤í–‰ ê¶Œí•œ ì¶”ê°€
RUN chmod +x ./app/echo.sh
# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ ìˆ˜í–‰ë  ëª…ë ¹
CMD ["sh", "-c", "./app/echo.sh"]
```
{% endraw %}


- `docker build -t test_cmd .` ë¡œê·¸ í™•ì¸

	![3](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/3.png)

- `docker inspect test_cmd` ê²°ê³¼ì—ì„œ "Cmd" í™•ì¸

	![4](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/4.png)



### 5. `ENTRYPOINT` ëª…ë ¹ì–´


ë„ì»¤ë¥¼ ë§ì´ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë‹¤ë©´ `ENTRYPOINT`ì—†ì´ `CMD`ë¥¼ ì£¼ë¡œ í™œìš©í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.



{% raw %}
```docker
# ì‚¬ìš©ë²• 1) ë¹„ê¶Œì¥ ì‚¬í•­
ENTRYPOINT command param1 param2

# ì‚¬ìš©ë²• 2) ê¶Œì¥ ì‚¬í•­  *í°ë”°ì˜´í‘œ(")ë§Œ ì‚¬ìš©ê°€ëŠ¥
ENTRYPOINT ["executable", "param1", "param2"]
```
{% endraw %}


- `ENTRYPOINT`ëŠ” **ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ ìˆ˜í–‰í•  "ëª…ë ¹"ì„ ì§€ì •**í•˜ëŠ”ë° ì‚¬ìš©í•œë‹¤.
- `ENTRYPOINT`ëŠ” ì£¼ë¡œ `CMD`ì™€ ê°™ì´ ì‚¬ìš©ëœë‹¤.
	- ì£¼ë¡œ `ENTRYPOINT`ì—ëŠ” ì‹¤í–‰í•  ëª…ë ¹ì„ ë„£ê³  `CMD`ì—ëŠ” íŒŒë¼ë¯¸í„°ë¥¼ ì •ì˜ ë°©ë²•ìœ¼ë¡œ ì‚¬ìš©í•œë‹¤.
- ì´ëŸ¬í•œ ë°©ë²•ì„ ì‚¬ìš©í•˜ëŠ” í° ì´ìœ ëŠ” `CMD`ì˜ ê²½ìš° ì‰½ê²Œ ì¬ì •ì˜ í•  ìˆ˜ ìˆê²Œ í–ˆê¸° ë•Œë¬¸ì´ë‹¤.
	- `ENTRYPOINT`ë¥¼ ì¬ì •ì˜ í•˜ë ¤ë©´ `docker run` ëª…ë ¹ì— `-entrypoint` ì˜µì…˜ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
	- ë°˜ë©´ `CMD`ì˜ ê²½ìš° `docker run <image> param1 parma2` ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ì¬ì •ì˜ê°€ ê°€ëŠ¥í•˜ë‹¤.
- `ENTRYPOINT` ëª…ë ¹ì€ `Dockerfile`ì—ì„œ 1ê°œë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
	- ì—¬ëŸ¬ê°œ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ê°€ì¥ ë§ˆì§€ë§‰ í•­ëª©ë§Œ ì ìš©ëœë‹¤.


#### ì˜ˆì‹œ1 - `ENTRYPOINT` ë¡œ ì‹¤í–‰ í™˜ê²½ ì§€ì •

1. ë¹Œë“œ ìˆ˜í–‰: `docker build -t node_entry .`


{% raw %}
```docker
FROM node:18.19.0-alpine

# ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ ì‹¤í–‰ë  ê°’ - ë³€ê²½í•  ìˆ˜ ì—†ìŒ
ENTRYPOINT ["node"]

# ì»¨í…Œë„ˆ ì‹¤í–‰ì‹œ ì‹¤í–‰ë  ê°’ - ë³€ê²½ í•  ìˆ˜ ìˆìŒ
CMD ["app.js"]
```
{% endraw %}


1. `docker inspect node_entry` ê²°ê³¼ì—ì„œ "Cmd", "Entrypoint" í™•ì¸

	![5](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/5.png)

2. í˜¸ìŠ¤íŠ¸ì— ì‹¤í–‰ì‹œí‚¬ `/root/test.js` íŒŒì¼ ì¤€ë¹„


{% raw %}
```javascript
console.log('Hello world');
console.log(`process.argv:\\n\\t${process.argv}`);
console.log(`new Date().toString():\\n\\t${new Date().toString()}`);
```
{% endraw %}


1. `/root/test.js`ì„ ë§ˆìš´íŠ¸ í•˜ê³  ì»¨í…Œì´ë„ˆ ì‹¤í–‰


{% raw %}
```shell
docker run -d \\
--name node_app \\
-v $(pwd)/test.js:/app.js \\ # ì»¨í…Œì´ë„ˆì— ìƒì„±ë  íŒŒì¼ app.jsë¡œ ì •ì˜
node_entry
```
{% endraw %}


- ê²°ê³¼

	![6](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/6.png)



#### ì˜ˆì‹œ2 - `run` ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰ì‹œ `CMD`ë¥¼ ì¬ì •ì˜


ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ CMD ì¬ì •ì˜



{% raw %}
```shell
docker run -d \\
--name node_app \\
-v $(pwd)/test.js:/test.js \\ # ì»¨í…Œì´ë„ˆì— ìƒì„±ë  íŒŒì¼ test.jsë¡œ ì •ì˜
node_entry \\
test.js param1  # <image> ì´í›„ì— ì˜¤ëŠ” ì¸ìëŠ” CMDë¥¼ ì¬ì •ì˜ í•œë‹¤.
```
{% endraw %}


- ê²°ê³¼

	![7](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/7.png)



#### ì˜ˆì‹œ3 - `run` ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰ì‹œ `ENTRYPOINT`ë¥¼ `/bin/sh` ë¡œ ì¬ì •ì˜


ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ `ENTRYPOINT`ë¥¼ `/bin/sh` ë¡œ ì¬ì •ì˜



{% raw %}
```shell
docker run \\
--name node_app \\
-v $(pwd)/test.js:/app.js \\
--entrypoint "/bin/sh" \\ # ENTRYPOINT ì¬ì •ì˜: ì‹¤í–‰ í™˜ê²½ì„ ì‰˜ë¡œ ë³€ê²½
node_entry \\
-c "cat app.js" # CMD ì¬ì •ì˜: ì‰˜ ëª…ë ¹ì¸ cat ì‹¤í–‰
```
{% endraw %}


- ê²°ê³¼

	![8](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/8.png)



#### ğŸ’¡`ENTRYPOINT`ëŠ” ì¬ì •ì˜ê°€ ì–´ë µë‹¤

- `docker run --entrypoint ...`ë¥¼ ì‚¬ìš©í•œ ì¬ì •ì˜ì—ëŠ” ì œì•½ì´ ë§ë‹¤.
- `docker run --help`ë¥¼ í•´ë³´ë©´ ì•Œì§€ë§Œ `-entrypoint` ë’¤ì—ëŠ” ë¬¸ìì—´ë§Œ ê°€ëŠ¥í•˜ë‹¤.
- ì¸ìë¡œ ì „ë‹¬ëœ ë¬¸ìì—´ì— ë„ì–´ì“°ê¸°ê°€ í¬í•¨ë˜ëŠ” ê²½ìš° ë‹¤ì–‘í•œ ë¬¸ì œê°€ ë°œìƒí•œë‹¤.
- ê²°ë¡ : ì¬ì •ì˜ê°€ ì–´ë µê¸° ë•Œë¬¸ì— `CMD` ì¬ì •ì˜ ë°©ë²•ì´ ë” ë§ì´ ì‚¬ìš©ëœë‹¤.

`-entrypoint` ì‹¤íŒ¨ ì‚¬ë¡€



{% raw %}
```shell
# ë„ì–´ì“°ê¸°ë¡œ ì¸í•´ TZ=Asia/Seoulë¥¼ í´ë”ë¡œ ì¸ì‹
## ... runc create failed: unable to start container process: exec: "TZ=Asia/Seoul node": stat TZ=Asia/Seoul node: no such file or directory: unknown.
docker run -d \\
--name node_app \\
-v $(pwd)/test.js:/app.js \\
--entrypoint "TZ=Asia/Seoul node" \\
node_entry

# ë„ì–´ì“°ê¸°ë¡œ ì¸í•´ node ì‹¤í–‰ íŒŒì¼ì„ ì •ìƒì ìœ¼ë¡œ ì°¾ì§€ ëª»í•¨
## ... runc create failed: unable to start container process: exec: "node -e": executable file not found in $PATH: unknown.
docker run -d \\
--name node_app \\
-v $(pwd)/test.js:/app.js \\
--entrypoint "node -e" \\
node_entry \\
"process.env.TZ='Asia/Seoul'; require('./app.js')" app.js;

# format ì—ëŸ¬
## docker: invalid reference format. See 'docker run --help'.
docker run -d \\
--name node_app \\
-v $(pwd)/test.js:/app.js \\
--entrypoint ["TZ=Asia/Seoul", "node"] \\
node_entry
```
{% endraw %}




### 6. `ENV` ëª…ë ¹ì–´



{% raw %}
```docker
ENV <key>=<value> ...
```
{% endraw %}


- `ENV` ëª…ë ¹ì€ **ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì •ì˜**í•˜ëŠ” ëª…ë ¹ì´ë‹¤.
- **`ENV`** **ì‚¬ìš©ì‹œ ì£¼ì˜ì‚¬í•­**
	- ENVë¡œ ì§€ì •ëœ í™˜ê²½ë³€ìˆ˜ì˜ ì§€ì†ì„±ì— ëŒ€í•´ ì´í•´í•˜ê³  ì‚¬ìš©í•´ì•¼ í•œë‹¤.
	- ì˜ëª»ëœ ENV ì‚¬ìš©ìœ¼ë¡œ ì´ì „ ë ˆì´ì–´ ë˜ëŠ” ë‹¤ìŒ ë ˆì´ì–´ì˜ í™˜ê²½ë³€ìˆ˜ë¥¼ ì˜¤ì—¼ ì‹œí‚¬ ìˆ˜ ìˆë‹¤.
	- ì°¸ê³ : [Docker docs > commandline > builder#env](https://docs.docker.com/engine/reference/builder/#env)
- `docker inspect` ëª…ë ¹ì„ í†µí•´ ìƒì„±ëœ ì´ë¯¸ì§€ì— ì •ì˜ëœ ENV ëª©ë¡ì„ ë³¼ ìˆ˜ ìˆë‹¤.
- `docker run --env <key>=<value>` ì„ ì‚¬ìš©í•˜ì—¬ ENV ì¬ì •ì˜ê°€ ê°€ëŠ¥í•˜ë‹¤.
	- ì—¬ëŸ¬ í™˜ê²½ë³€ìˆ˜ë¥¼ ì£¼ì…í•˜ë ¤ë©´ `-env <key>=<value>`ë¥¼ ì—°ì†í•˜ì—¬ ì‚¬ìš©í•œë‹¤.
	- `-env <key>=<value>`ë¥¼ ì‚¬ìš©í•˜ë©´ ENVë¡œ ì§€ì •ë˜ì§€ ì•ŠëŠ” í™˜ê²½ ë³€ìˆ˜ë„ ì£¼ì…ì´ ê°€ëŠ¥í•˜ë‹¤.
- ì—¬ëŸ¬ FROMë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ìµœì¢… FROMì— ì •ì˜ëœ ENV ìµœì¢…ì ìœ¼ë¡œ ì ìš©ëœë‹¤.
	- ìƒì„±ëœ ì»¨í…Œì´ë„ˆì— í™˜ê²½ë³€ìˆ˜ë¡œ ì‚¬ìš©
	- `docker inspect` ì—ì„œ í™•ì¸ê°€ëŠ¥


#### ì˜ˆì‹œ1) ì´ë¯¸ì§€ `ENV` ë‹¨ìˆœ ì‚¬ìš©



{% raw %}
```docker
FROM ubuntu as job1

ENV VAR1="test 1"
ENV VAR2=test\\ 2

FROM ubuntu as job2
# ìƒì„±ëœ ì´ë¯¸ì§€ ë§ˆì§€ë§‰ FROMì— ì •ì˜ëœ ENVë§Œ ì ìš©ëœë‹¤.
ENV VAR3=test3
CMD ["sh", "-c", "echo $VAR1, $VAR2, $VAR3 && env"]
```
{% endraw %}


- `docker build -t test_env .` ë¡œê·¸ í™•ì¸

	![9](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/9.png)

- `docker inspect test_env` ê²°ê³¼ì—ì„œ "Env" í™•ì¸

	![10](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/10.png)

- `docker run`  ì‹¤í–‰ ê²°ê³¼ í™•ì¸

	![11](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/11.png)



#### ì˜ˆì‹œ2) `run` ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰ì‹œ í™˜ê²½ë³€ìˆ˜ ì¬ì •ì˜



{% raw %}
```shell
docker run --name env_container \\
--env VAR3=custom3 \\
test_env
```
{% endraw %}


- ê²°ê³¼ í™•ì¸

	![12](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/12.png)



#### ì˜ˆì‹œ3) `run` ëª…ë ¹ìœ¼ë¡œ ì‹¤í–‰ì‹œ í™˜ê²½ë³€ìˆ˜ ì‹ ê·œ ì •ì˜



{% raw %}
```shell
docker run --name env_container \\
--env CUSTOM=value1 \\
--env VAR1=value1 \\
test_env
```
{% endraw %}


- ê²°ê³¼ í™•ì¸

	![13](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/13.png)



### 7. `WORKDIR` ëª…ë ¹ì–´



{% raw %}
```docker
WORKDIR /path/to/workdir
```
{% endraw %}


- `WORKDIR` ëŠ” ë‹¨ìˆœí•˜ê²Œ **ì‘ì—…í•  ê³µê°„ì¸ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±**í•˜ëŠ” ëª…ë ¹ì´ë‹¤.
- `WORKDIR` ëŠ” ì‰½ê²Œ ë³´ë©´ 2ê°€ì§€ ëª…ë ¹ì„ ìˆ˜í–‰í•œë‹¤.
	1. `mkdir /path/to/workdir`
	2. `cd /path/to/workdir`
- `WORKDIR` ëª…ë ¹ì€ ì—¬ëŸ¬ë²ˆ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.
- ì‘ì—… ë””ë ‰í† ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ì€ ë£¨íŠ¸(/)ì´ë‹¤.
- ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì •ì€ í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•œë‹¤.
	- ì˜ì¡´í•˜ëŠ” ì´ë¯¸ì§€ì— ì˜í•´ ì‘ì—… ë””ë ‰í† ë¦¬ê°€ ì„¤ì •ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë¼ê³  í•œë‹¤.


#### ì˜ˆì‹œ1) `WORKDIR` ê³µì‹ ì˜ˆì œ



{% raw %}
```docker
WORKDIR /a
WORKDIR b
WORKDIR c
RUN pwd
```
{% endraw %}


- pwdì˜ ê²°ê³¼ëŠ” `/a/b/c` ì´ë‹¤.


### 8. `COPY` ëª…ë ¹ì–´



{% raw %}
```docker
# ì‚¬ìš©ë²• 1.
COPY <src>... <dest>

# ì‚¬ìš©ë²• 2. pathì— ê³µë°±ì´ ìˆëŠ” ê²½ìš° ì‚¬ìš©í•œë‹¤.
COPY ["<src>",... "<dest>"]

# ì‚¬ìš©ë²• 3. ê¶Œí•œ ë¶€ì—¬ ì‚¬ìš©
COPY [--chown=<user>:<group>] [--chmod=<perms>] <src>... <dest>

# ì‚¬ìš©ë²• 4. ì´ì „ from ê²°ê³¼ë¥¼ ë³µì‚¬
COPY ...ê¶Œí•œ [--from=<from>] <src>... <dest>
```
{% endraw %}


- `COPY`ëŠ” **í˜¸ìŠ¤íŠ¸ì— ìˆëŠ” íŒŒì¼(ë””ë ‰í† ë¦¬)ì„ ë³µì‚¬**í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.
- ë³µì‚¬ëœ íŒŒì¼ì€ ë¹Œë“œì‹œ ë˜ëŠ” ì»¨í…Œì´ë„ˆì—ì„œ ì‚¬ìš©ëœë‹¤.
- `<src>` ì˜ ê²½ìš° íˆë“ ì¹´ë“œë¥¼ í†µí•œ ì°¾ê¸°ë„ ì§€ì›í•œë‹¤.
	- ex) `COPY hom* /mydir/`
	- ex) `COPY hom?.txt /mydir/`
- ì¼ë¶€ íŒŒì¼ì˜ ê²½ìš° ê¶Œí•œì´ í•„ìš”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê¶Œí•œì„ ì»¨íŠ¸ë¡¤í•˜ëŠ” `-chown` ì˜µì…˜ì„ ì œê³µí•œë‹¤.
	- `-chown` ì˜µì…˜ì˜ ê²½ìš° window í™˜ê²½ì„ ê°€ì§„ ì»¨í…Œì´ë„ˆì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ê³  í•œë‹¤.
	- ì°¸ê³ : ì°¸ê³ : [Docker docs > commandline > builder#options](https://docs.docker.com/engine/reference/builder/#copy)
- ë˜í•œ `-from` ì˜µì…˜ì„ í†µí•´ ì´ì „ FROMì—ì„œ ìƒì„±ëœ íŒŒì¼ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©ë„ ê°€ëŠ¥í•˜ë‹¤.


### 9. ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œë¡œ ë³´ëŠ” Dockerfile



#### 9.1. `node` í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ ë¹Œë“œ - ê¸°ì´ˆ



{% raw %}
```docker
FROM node:18.19.0-alpine

# 1. ì‘ì—… ë””ë ‰í† ë¦¬ ì„¤ì • = 'mkdir /usr/app && cd /usr/app'
WORKDIR /usr/app

# 2. ì˜ì¡´ì„± ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•´ ë³µì‚¬
COPY package*.json ./
# 3. ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ ìˆ˜í–‰
RUN npm ci

# 4. ts ì„¤ì • íŒŒì¼ ë³µì‚¬
COPY tsconfig.json ./
# 5. ì†ŒìŠ¤ì½”ë“œ í¬í•¨í•œ ëª¨ë“  íŒŒì¼ ë³µì‚¬
## ì´ ê²½ìš° '.dockerignore' í•„ìˆ˜ë¡œ ì‚¬ìš©í•œë‹¤.
COPY . /usr/app

# 6. ë¹Œë“œ ëª…ë ¹ ìˆ˜í–‰
RUN npm run build
# 7. ì»¨í…Œì´ë„ˆ ì •ìƒ ì‹¤í–‰ í›„ ë¹Œë“œëœ ê²°ê³¼ë¡œ appì´ ì‹¤í–‰ë˜ë„ë¡ ëª…ë ¹ì–´ ì§€ì •
CMD ["npm","run","start"]
```
{% endraw %}


- ìœ„ì˜ DockerfileëŠ” ë³´ì™„ì ì´ ì¡´ì¬í•œë‹¤.
- node ì‹¤í–‰ì‹œ í•„ìš” ì—†ëŠ” í™˜ê²½ì„ ì œê±°í•˜ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì´ë‹¤.
- ì¦‰, typescript í™˜ê²½ì´ë‚˜ devDependenciesë¥¼ ì œê±°í•œ ì´ë¯¸ì§€ê°€ ë˜ì–´ì•¼ í•œë‹¤.
- ê·¸ë ‡ê²Œ ë˜ë©´ ë” ê²½ëŸ‰í™”ëœ ì´ë¯¸ì§€ì™€ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.


#### 9.2. `node`(`nestjs`) í™˜ê²½ì—ì„œ ì´ë¯¸ì§€ ë¹Œë“œ - ê³ ê¸‰



{% raw %}
```docker
### builder: í•´ë‹¹ FROMì€ ë¹Œë“œë§Œ ìˆ˜í–‰í•œë‹¤. ###
FROM node:18.19.0-alpine as builder
# builder-1) ì‘ì—… ë””ë ‰í† ë¦¬ ì§€ì •
WORKDIR /app
# builder-2) ì˜ì¡´ì„± ì„¤ì¹˜
COPY ./package.json /app
COPY ./package-lock.json /app
RUN npm ci
## ë‹¤ë¥¸ ë°©ë²•ë„ ê°€ëŠ¥í•˜ì§€ë§Œ ê²½ëŸ‰í™” ì‘ì—…ì„ ìˆ˜í–‰í•˜ê¸° ë•Œë¬¸ì— ì´ê²ƒë„ ë¬¸ì œê°€ ì—†ë‹¤.
RUN npm i -g @nestjs/cli
# builder-3) node_modulesì—ì„œ devDependencies ì œê±°
RUN npm prune --production

# builder-4) ë¹Œë“œ ìˆ˜í–‰
COPY . .
RUN npm run build

### images: í•´ë‹¹ FROMì˜ ê²°ê³¼ë¥¼ ìµœì¢… ì´ë¯¸ì§€ë¡œ ìƒì„±í•œë‹¤. ###
FROM node:18.19.0-alpine as images
# images-1) ì‘ì—… ë””ë ‰í† ë¦¬ ì§€ì •
WORKDIR /app
# images-2) ì´ì „ FROMì¸ 'builder'ì—ì„œ ìƒì„±ëœ ë¹Œë“œëœ í´ë” ë³µì‚¬
COPY --from=builder /app/dist /app/dist
# images-3) node_modules ë³µì‚¬
COPY --from=builder /app/node_modules /app/node_modules
# images-4) ì»¨í…Œì´ë„ˆ ì •ìƒ ì‹¤í–‰ í›„ ë¹Œë“œëœ ê²°ê³¼ë¡œ appì´ ì‹¤í–‰ë˜ë„ë¡ ëª…ë ¹ì–´ ì§€ì •
CMD ["node", "dist/main"]
```
{% endraw %}


- í•´ë‹¹ ì´ë¯¸ì§€ì˜ ìµœì¢… ê²°ê³¼ëŠ” ì•±ì„ ì¼¤ ìˆ˜ ìˆëŠ” ìƒíƒœë¡œ ì¶©ë¶„í•˜ë‹¤.
	- `/app/dist`
	- `devDependencies`ê°€ ì œê±°ëœ `/app/node_modules`


#### ê²½ëŸ‰í™” ì‘ì—…ì„ ìˆ˜í–‰ ë¹„êµ ê²°ê³¼


![14](/assets/img/2023-09-30-ì‹œë¦¬ì¦ˆ--Docker-6.-Dockerfileë¥¼-ì‚¬ìš©í•´-ì´ë¯¸ì§€-ìƒì„±.md/14.png)

- `latest`: 'images' ë‹¨ê³„ ì—†ì´ 'builder'ì—ì„œ `CMD` ëª…ë ¹ì„ ì‚¬ìš©í•œ ì´ë¯¸ì§€ë¡œ ìµœì¢… í¬ê¸°ê°€ '348MB' ì´ë‹¤.
- `slim`: 'images' ë‹¨ê³„ë¥¼ ì‚¬ìš©í†µí•´ ê²½ëŸ‰í™”ë¥¼ ìˆ˜í–‰í•œ ì´ë¯¸ì§€ë¡œ ìµœì¢… í¬ê¸°ê°€ '197MB' ì´ë‹¤.


### 10. ì •ë¦¬


`Dockerfile`ëŠ” Docker Imageë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ëª…ë ¹ì„ ë‹´ì€ íŒŒì¼ì´ë‹¤.


ì •ì˜ëœ `Dockerfile`ì€ `docker build` CLIì— íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ë˜ì–´ ì´ë¯¸ì§€ë¡œ ìƒì„±ëœë‹¤.


`Dockerfile`ì˜ ì£¼ëœ ëª…ë ¹ë“¤ì„ ê°„ë‹¨í•˜ê²Œ ì •ì˜í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

- `FROM` - ì‹ ê·œë¡œ ìƒì„±ë  ì´ë¯¸ì§€ì˜ Base ì´ë¯¸ì§€ë¥¼ ì§€ì •
- `RUN` - ì´ë¯¸ì§€ ë¹Œë“œì— í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ëª…ë ¹ì„ ìˆ˜í–‰
- `CMD` - ì»¨í…Œì´ë„ˆê°€ ì •ìƒ ì‹¤í–‰ë  ë•Œ "ê¸°ë³¸ê°’(ëª…ë ¹)"ì„ ì „ë‹¬(ì‹¤í–‰)í•˜ëŠ” ëª©ì 
- `ENTRYPOINT` - ì»¨í…Œì´ë„ˆ ì‹¤í–‰ì‹œ ìˆ˜í–‰í•  "ëª…ë ¹"ì„ ì§€ì •
- `ENV` - ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì •ì˜
- `WORKDIR` - ì‘ì—…í•  ê³µê°„ì¸ ë””ë ‰í† ë¦¬ë¥¼ ìƒì„±
- `COPY` - í˜¸ìŠ¤íŠ¸ì— ìˆëŠ” íŒŒì¼(ë””ë ‰í† ë¦¬)ì„ ë³µì‚¬

`Dockerfile`ì€ ì‰¬ìš°ë©´ì„œë„ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ê¸°ëŠ” ì–´ë µë‹¤.


ë„ì»¤ì— ìµìˆ™í•˜ì§€ ì•Šì€ ì‚¬ëŒë“¤ì€ ëˆ„êµ°ê°€ì˜ `Dockerfile`ì„ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•  ê²ƒì´ë‹¤.


í•„ìš”ì— ë”°ë¼ ì¡°ê¸ˆì— ìˆ˜ì •í–ˆëŠ”ë° ì—ëŸ¬ë¥¼ ë§Œë‚˜ëŠ” ì‚¬ëŒë„ ë¶„ëª… ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤. ê²Œë‹¤ê°€ ë¹Œë“œì— ì„±ê³µ ì´í›„ run ê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤. ë‚´ê°€ ì²˜ìŒì— ê·¸ë¬ë‹¤ ì´í•´í•˜ì§€ ì•Šê³  ë  ë•Œê¹Œì§€ ëª‡ ë²ˆì´ê³  ë¹Œë“œë¥¼ ëŒë ¤ê°€ë©° í—¤ë”©í–ˆë‹¤. ë‚˜ì™€ ê°™ì€ ëˆ„êµ°ê°€ ë‚´ê°€ ì •ë¦¬í•œ ê¸€ì„ ì½ê³  ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ë§ˆìŒì´ë‹¤.



### ì°¸ê³ 

- [Docker docs > Dockerfile](https://docs.docker.com/engine/reference/builder/)
- [3. Docker ì‚¬ìš©ì„ ìœ„í•œ í™˜ê²½ ì´í•´í•˜ê¸° > ë„ì»¤ ë¼ì´ë¸Œì‚¬ì´í´](https://jaynote2022.tistory.com/50#3.%20%EB%8F%84%EC%BB%A4%20%EB%9D%BC%EC%9D%B4%EB%B8%8C%EC%82%AC%EC%9D%B4%ED%81%B4)
